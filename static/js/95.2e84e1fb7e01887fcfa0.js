(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{1567:function(e,s,t){(e.exports=t(15)(!1)).push([e.i,"",""])},1568:function(e,s,t){"use strict";var a=t(935);t.n(a).a},1569:function(e,s,t){(e.exports=t(15)(!1)).push([e.i,"main#chat[data-v-2c5820ad]{height:100%}header.title-bar[data-v-2c5820ad]{padding:10px 0;border-bottom:1px solid #f1f1f1}header.title-bar img.logo[data-v-2c5820ad]{width:100%;max-width:140px}header.title-bar span.title[data-v-2c5820ad]{color:#969696;font-weight:100;text-transform:uppercase;font-size:1.2em;margin-left:7px}",""])},1570:function(e,s,t){"use strict";var a=t(936);t.n(a).a},1571:function(e,s,t){(e.exports=t(15)(!1)).push([e.i,"main.chat{padding:10px;overflow-y:scroll}main.chat img.avatar{border-radius:100%;height:45px;width:45px;flex:none}main.chat .message{flex:0 0 auto}main.chat .message img.avatar{margin-right:10px}main.chat .message p.message-header{margin:0;font-size:.9em}main.chat .message p.message-header span.sent-date{color:#969696}",""])},1572:function(e,s,t){"use strict";var a=t(937);t.n(a).a},1573:function(e,s,t){(e.exports=t(15)(!1)).push([e.i,"aside.sidebar{background:#f8f8f8;max-width:340px;padding:15px;border-right:1px solid #f1f1f1}aside.sidebar .online-count{color:#31d8a0;margin-right:5px}aside.sidebar h4{margin:0 0 20px;color:#c3c3c3}aside.sidebar .user-list{overflow-y:scroll}aside.sidebar li{margin:15px 0}aside.sidebar li>a{color:#555},aside.sidebar li>a:focus>span,aside.sidebar li>a:hover>span{color:#31d8a0}aside.sidebar img.avatar{border-radius:100%;height:45px;width:45px;margin-right:10px}aside.sidebar .username{position:absolute;line-height:45px}",""])},1574:function(e,s,t){"use strict";var a=t(938);t.n(a).a},679:function(e,s,t){"use strict";t.r(s);var a=t(2),r=t.n(a),i=t(46),n={props:{users:Array,logout:Function},data:function(){return{dummyUser:[{email:"noemail",avatar:"https://s.gravatar.com/avatar/7eb0f9eac6df7e6be3971144999a2152?s=200"}]}},computed:{plural:function(){return 1===this.users.length?"user":"users"}}},l=(t(1574),t(7)),c=Object(l.a)(n,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("aside",{staticClass:"sidebar col col-3 flex flex-column flex-space-between"},[t("header",{staticClass:"flex flex-row flex-center"},[t("h4",{staticClass:"font-300 text-center"},[t("span",{staticClass:"font-600 online-count"},[e._v(e._s(e.users.length))]),e._v(" "+e._s(e.plural)+"\n    ")])]),e._v(" "),t("ul",{staticClass:"flex flex-column flex-1 list-unstyled user-list"},e._l(e.users,function(s,a){return t("li",{key:a},[t("a",{staticClass:"block relative",attrs:{href:"javascript://"}},[t("img",{staticClass:"avatar",attrs:{src:s.avatar||e.dummyUser.avatar,alt:""}}),e._v(" "),t("span",{staticClass:"absolute username"},[e._v(e._s(s.email||e.dummyUser.email))])])])})),e._v(" "),t("footer",{staticClass:"flex flex-row flex-center"})])},[],!1,null,null,null).exports,o={data:function(){return{newMessage:""}},props:{createMessage:Function},methods:{addMessage:function(){this.createMessage({text:this.newMessage}).then(this.clearMessage)},clearMessage:function(){this.newMessage=""}}},u=Object(l.a)(o,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("form",{staticClass:"flex flex-row flex-space-between",attrs:{id:"send-message"},on:{submit:function(e){e.preventDefault()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"flex flex-1",attrs:{type:"text",name:"text"},domProps:{value:e.newMessage},on:{input:function(s){s.target.composing||(e.newMessage=s.target.value)}}}),e._v(" "),t("button",{staticClass:"button-primary",attrs:{type:"submit"},on:{click:e.addMessage}},[e._v("Send")])])},[],!1,null,null,null).exports,m={props:["message","index"],computed:{formattedDate:function(){return this.message.createdAt.toString()}}},f=Object(l.a)(m,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"message flex flex-row"},[t("img",{staticClass:"avatar",attrs:{src:e.message.user.avatar||e.placeholder,alt:e.message.user.email}}),e._v(" "),t("div",{staticClass:"message-wrapper"},[t("p",{staticClass:"message-header"},[t("span",{staticClass:"username font-600"},[e._v(e._s(e.message.user.email))]),e._v(" "),t("span",{staticClass:"sent-date font-300"},[e._v(e._s(e.formattedDate))])]),e._v(" "),t("p",{staticClass:"message-content font-300"},[e._v(e._s(e.message.text))])])])},[],!1,null,null,null).exports,d={props:{messages:Array,createMessage:Function},data:function(){return{}},methods:{scrollToBottom:function(){var e=this;this.$nextTick(function(){var s=e.$el.getElementsByClassName("chat")[0];s.scrollTop=s.scrollHeight})}},watch:{messages:function(){this.messages.length&&this.scrollToBottom()}},components:{"c-compose-message":u,"c-single-message":f}},g=(t(1572),Object(l.a)(d,function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"flex flex-column col col-9"},[s("main",{staticClass:"chat flex flex-column flex-1 clear"},this._l(this.messages,function(e){return s("c-single-message",{key:e._id,attrs:{message:e}})})),this._v(" "),s("c-compose-message",{attrs:{createMessage:this.createMessage}})],1)},[],!1,null,null,null).exports),p={props:{messages:Array},computed:r()({},Object(i.e)("auth",["user"]),Object(i.c)("users",{users:"list"})),methods:r()({},Object(i.b)("messages",{createMessage:"create"}),Object(i.b)("users",{findUsers:"find"}),Object(i.b)("messages",{findMessages:"find"}),Object(i.b)("auth",["logout"])),created:function(){this.findMessages({query:{$sort:{createdAt:1},$limit:25}}),this.findUsers({query:{$sort:{email:1},$limit:25}})},components:{"c-user-list":c,"c-message-list":g}},h=(t(1570),{components:{"c-chat":Object(l.a)(p,function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("main",{staticClass:"flex flex-column",attrs:{id:"chat"}},[e._m(0),e._v(" "),e.user?t("div",{staticClass:"flex flex-row flex-1 clear"},[t("c-user-list",{attrs:{users:e.users,logout:e.logout}}),e._v(" "),t("c-message-list",{attrs:{messages:e.messages,createMessage:e.createMessage}})],1):e._e()])},[function(){var e=this.$createElement,s=this._self._c||e;return s("header",{staticClass:"title-bar flex flex-row flex-center"},[s("div",{staticClass:"title-wrapper block center-element"},[s("span",{staticClass:"title"},[this._v("Chat")])])])}],!1,null,"2c5820ad",null).exports},computed:{messages:function(){return this.$store.getters["messages/list"]}},data:function(){return{}}}),x=(t(1568),Object(l.a)(h,function(){var e=this.$createElement,s=this._self._c||e;return s("c-layout",{attrs:{navigationKey:"chat"}},[s("c-chat",{attrs:{messages:this.messages}})],1)},[],!1,null,"73de1a40",null));s.default=x.exports},935:function(e,s,t){var a=t(1567);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(14)("7e2413b8",a,!0,{})},936:function(e,s,t){var a=t(1569);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(14)("7f688902",a,!0,{})},937:function(e,s,t){var a=t(1571);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(14)("55c84950",a,!0,{})},938:function(e,s,t){var a=t(1573);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(14)("6b1357d8",a,!0,{})}}]);