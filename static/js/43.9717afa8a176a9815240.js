(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1159:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=new(n(3).default)},1272:function(t,e,n){(t.exports=n(15)(!1)).push([t.i,".item-navigator[data-v-468503e8]{background:rgba(1,1,1,.1);border-radius:4px;width:100%;display:flex;overflow:hidden;overflow:auto;margin-bottom:100px;padding:0 100px 100px 0}.assets-tree--delete[data-v-468503e8]{background:rgba(1,1,1,.1);border-radius:4px;border:1px solid #fff}",""])},1273:function(t,e,n){"use strict";var a=n(804);n.n(a).a},619:function(t,e,n){"use strict";n.r(e);var a=n(25),s=n.n(a),i=n(5),r=n.n(i),o=n(10),l=n.n(o),c=n(63),u=n.n(c),d=n(2),v=n.n(d),f=n(12),h=n.n(f),g=n(1159),p={components:{"c-layout":function(t){return Promise.resolve().then(function(){var e=[n(1210)];t.apply(null,e)}.bind(this)).catch(n.oe)},"c-navigator-item":function(t){return n.e(321).then(function(){var e=[n(2198)];t.apply(null,e)}.bind(this)).catch(n.oe)},"c-modal":function(t){return n.e(209).then(function(){var e=[n(2287)];t.apply(null,e)}.bind(this)).catch(n.oe)},"c-assets":function(t){return n.e(202).then(function(){var e=[n(2209)];t.apply(null,e)}.bind(this)).catch(n.oe)}},data:function(){return{activeId:null,deleteId:null,deletingTree:null,deletingParentId:null}},methods:{evolveNavigator:function(t){this.$store.dispatch("assets/evolveNavigator",{evolveId:this.activeId,assetId:t}),this.activeId=null},deleteTree:function(t){this.$store.dispatch("assets/devolveNavigator",{id:t,parentId:this.deletingParentId}),this.deletingParentId=null,this.deletingTree=null}},computed:{assets:function(){return this.$store.state.assets.assets},navigator:function(){return this.$store.state.assets.navigator},assetsArray:function(){return h()(this.assets)},deeplyNestedNav:function(){var t=this.navigator,e=this.assets,n=h()(t).reduce(function(t,n){var a=v()({},n);for(var s in a)"object"===u()(a[s])&&(Array.isArray(a[s])?a[s]=[].concat(l()(a[s])):a[s]=v()({},a[s]));return v()({},t,r()({},n.id,v()({},a,{asset:e[a.assetId]})))},{}),a=h()(n),i=!0,o=!1,c=void 0;try{for(var d,f=s()(a);!(i=(d=f.next()).done);i=!0){var g=d.value;g.evolvesTo=g.evolvesTo.map(function(t){return n[t]})}}catch(t){o=!0,c=t}finally{try{!i&&f.return&&f.return()}finally{if(o)throw c}}return a.filter(function(t){return t.isRoot})}},mounted:function(){var t=this;g.a.$on("evolve",function(e){return t.activeId=e}),g.a.$on("devolve",function(e){e.id;var n=e.tree,a=e.parentId;t.deletingTree=[v()({},n,{isRoot:!0})],t.deletingParentId=a})},beforeDestroy:function(){g.a.$off("evolve"),g.a.$off("devolve")}},y=(n(1273),n(7)),b=Object(y.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("c-layout",{attrs:{navigationKey:"meta"}},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"item-navigator"},t._l(t.deeplyNestedNav,function(t,e){return n("c-navigator-item",{key:e,attrs:{index:e,item:t,listLength:t.evolvesTo.length}})})),t._v(" "),t.activeId?n("c-modal",{attrs:{title:"Select next asset to expand the tree"},on:{close:function(e){t.activeId=null}}},[n("c-assets",{attrs:{slot:"body",assets:t.assetsArray},on:{click:function(e){t.evolveNavigator(e.id)}},slot:"body"})],1):t._e(),t._v(" "),t.deletingTree?n("c-modal",{attrs:{title:"Delete asset from the tree"},on:{close:function(e){t.deletingTree=null}}},[n("p",{staticClass:"text-align-center"},[t._v("Are you sure to delete this assets tree?")]),t._v(" "),t._l(t.deletingTree,function(t,e){return n("c-navigator-item",{key:e,staticClass:"assets-tree--delete",attrs:{index:e,item:t,listLength:t.evolvesTo.length,hideButtons:""}})}),t._v(" "),n("div",{staticClass:"flex-center-between margin-top-50"},[n("c-button",{attrs:{status:"info",iconHide:""},on:{click:function(e){t.deletingTree=null}}},[t._v("\n                            Cancel\n                        ")]),t._v(" "),n("c-button",{attrs:{status:"success"},on:{click:function(e){t.deleteTree(t.deletingTree[0].id)}}},[t._v("\n                            Confirm\n                        ")])],1)],2):t._e()],1)])])])},[],!1,null,"468503e8",null);e.default=b.exports},804:function(t,e,n){var a=n(1272);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(14)("168b22ee",a,!0,{})}}]);