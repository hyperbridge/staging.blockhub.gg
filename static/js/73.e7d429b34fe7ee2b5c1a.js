(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1511:function(t,e,a){"use strict";a.r(e);var s=a(5),o=a.n(s),i=a(9),c=a.n(i),r=a(17),n=a.n(r),l=a(2),d=a.n(l),u=(a(74),{props:{id:[String,Number]},components:{"c-layout":function(t){return a.e(212).then(function(){var e=[a(1696)];t.apply(null,e)}.bind(this)).catch(a.oe)},"c-html-editor":function(t){return a.e(242).then(function(){var e=[a(1692)];t.apply(null,e)}.bind(this)).catch(a.oe)},"c-json-editor":function(t){return a.e(241).then(function(){var e=[a(1691)];t.apply(null,e)}.bind(this)).catch(a.oe)},"c-multiselect":function(t){return a.e(216).then(function(){var e=[a(1911)];t.apply(null,e)}.bind(this)).catch(a.oe)}},data:function(){var t="new"===this.id?this.$store.state.funding.defaultProject:this.$store.getters["projects/get"](this.id);return t||(t=this.$store.state.funding.defaultProject),{loadingState:!0,notice:"",advanced:!1,project:t,blockchain:!1,tagOptions:[]}},computed:{originalProject:function(){return"new"===this.id?this.$store.state.funding.defaultProject:this.$store.getters["projects/get"](this.id)}},watch:{originalProject:function(){this.project=d()({},this.project,this.originalProject)}},created:function(){"new"!==this.id&&this.$store.dispatch("projects/find",{query:{id:Number(this.id),$eager:"tags"}})},methods:{updateProjectRaw:function(t){this.project=JSON.parse(t)},syncBlockchain:function(){},createBlockchain:function(){var t=this,e={key:function(t,e,a,s,i,r,l,d,u,p,v){var m,h=this,f=v.project,g=v.profile;return new n.a((m=c()(o.a.mark(function t(i,c){var r,n,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.api.ethereum.state.contracts.ProjectRegistration.deployed,n=!1,l=r.ProjectCreated().watch(function(t,s){if(!n){if(n=!0,t)return console.warn("[BlockHub][Marketplace] Error",t),c(t);f.$loki=void 0,f.id=s.args.projectId.toNumber();try{e.funding.projects.insert(f),console.log("after",f.id)}catch(t){try{e.funding.projects.update(f)}catch(t){c(t)}}e.save(),a.sendCommand("updateState",{module:"funding",state:{projects:e.funding.projects.data}}),console.log("Project created"),i(f)}}),t.next=5,r.createProject(f.name,f.description,f.content,{from:g.address});case 5:l.stopWatching(function(){});case 6:case"end":return t.stop()}},t,h)})),function(t,e){return m.apply(this,arguments)}))}.toString(),params:{profile:this.$store.state.application.activeProfile,project:this.project}};window.BlockHub.Bridge.sendCommand("eval",e).then(function(e){e.id&&(t.project.id=e.id,t.successfulCreationMessage="Congratulations, your project has been created!",t.funding.projects[t.project.id]=t.project,t.$router.push("/business/project/"+t.project.id))})},updateBlockchain:function(){window.BlockHub.Bridge.sendCommand("eval",function(t,e,a,s,i,r,l,d,u,p,v){var m=this;return new n.a(c()(o.a.mark(function t(){var a,i,c,r,l,d,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={title:"test",description:"test",about:"test",minContributionGoal:1e3,maxContributionGoal:1e4,contributionPeriod:4,noRefunds:!1,noTimeline:!0},i=s.api.ethereum.state.contracts.ProjectRegistration.deployed,c=null,r=new n.a(function(t){c=t}),l=i.ProjectCreated().watch(function(t,s){if(t)return console.warn("[BlockHub][Funding] Error",t),reject(t);a.$loki=void 0,a.id=s.args.projectId.toNumber();try{e.funding.projects.insert(a)}catch(t){try{e.funding.projects.update(a)}catch(t){reject(t)}}c(a.id)}),t.next=7,i.createProject(a.title,a.description,a.about);case 7:return l.stopWatching(),t.next=10,r;case 10:return d=t.sent,t.next=13,i.setProjectContributionGoals(d,a.minContributionGoal,a.maxContributionGoal,a.contributionPeriod,{from:developerAccount});case 13:return t.next=15,i.setProjectTerms(d,a.noRefunds,a.noTimeline,{from:developerAccount});case 15:return t.next=17,i.getProject(d);case 17:u=t.sent,console.log(u);case 19:case"end":return t.stop()}},t,m)})))}.toString())},addTag:function(t){var e={key:t.substring(0,2)+Math.floor(1e7*Math.random()),value:t};this.tagOptions.push(e),this.project.tags.push(e)},viewPage:function(){},toggleAdvanced:function(){this.advanced=!this.advanced},create:function(){var t=this;this.project.ownerId=this.$store.state.application.activeProfile.id,this.$store.dispatch("projects/create",this.project).then(function(e){t.project.id=e.id,t.notice="Congratulations, your project has been created!",t.$router.push("/business/project/"+t.project.id)})},save:function(){var t=this;this.project.ownerId=this.$store.state.application.activeProfile.id,this.$store.dispatch("projects/update",[this.project.id,this.project,{query:{$eager:"tags"}}]).then(function(){t.notice="Project has been saved."})}}}),p=(a(996),a(0)),v=Object(p.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("c-layout",[a("div",{staticClass:"row"},[t.notice?a("div",{staticClass:"col-md-12"},[a("p",{staticClass:"alert alert-info"},[t._v(t._s(t.notice))]),t._v(" "),a("br"),a("br")]):t._e(),t._v(" "),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-3"},[a("label",[t._v("Title")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.name,expression:"project.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.project.name},on:{input:function(e){e.target.composing||t.$set(t.project,"name",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-3"},[a("label",[t._v("Description")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.description,expression:"project.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.project.description},on:{input:function(e){e.target.composing||t.$set(t.project,"description",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-4"},[a("label",[t._v("Tags")])]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("c-multiselect",{attrs:{"tag-placeholder":"Add this as new tag",placeholder:"Search or add a tag",label:"value","track-by":"key",options:t.tagOptions,multiple:!0,taggable:!0},on:{tag:t.addTag},model:{value:t.project.tags,callback:function(e){t.$set(t.project,"tags",e)},expression:"project.tags"}}),t._v(" "),a("span",{staticClass:"form-text"})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-4"},[a("label",[t._v("Minimum Contribution Goal")])]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.meta.funds.goal,expression:"project.meta.funds.goal"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Example: 0"},domProps:{value:t.project.meta.funds.goal},on:{input:function(e){e.target.composing||t.$set(t.project.meta.funds,"goal",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-4"},[a("label",[t._v("Maximum Contribution Goal")])]),t._v(" "),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.meta.funds.cap,expression:"project.meta.funds.cap"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Example: 1000"},domProps:{value:t.project.meta.funds.cap},on:{input:function(e){e.target.composing||t.$set(t.project.meta.funds,"cap",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("c-html-editor",{attrs:{height:"200",model:t.project.value},on:{"update:model":function(e){t.$set(t.project,"value",e)}}}),t._v(" "),a("span",{staticClass:"form-text"})],1),t._v(" "),a("div",{staticClass:"col-12"},[a("c-heading-bar-color",{staticClass:"mt-4 mb-4",attrs:{colorCode:"#444",textAlign:"center",hidden:""}},[t._v("Advanced Options")]),t._v(" "),a("div",{on:{click:t.toggleAdvanced}},[a("i",{staticClass:"mr-2 fas",class:t.advanced?"fa-angle-up":"fa-angle-down"}),t._v("\n                "+t._s(t.advanced?"Hide":"Show")+" Advanced\n            ")])],1),t._v(" "),t.advanced?a("div",{staticClass:"col-12"},[a("hr")]):t._e(),t._v(" "),t.advanced?a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-3"},[a("label",[t._v("Support Email")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.meta.supportEmail,expression:"project.meta.supportEmail"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Example: example@domain.com"},domProps:{value:t.project.meta.supportEmail},on:{input:function(e){e.target.composing||t.$set(t.project.meta,"supportEmail",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-3"},[a("label",[t._v("Twitter Username")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("div",{staticClass:"input-group mb-2 mr-sm-2 mb-sm-0"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("@")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.meta.twitterUsername,expression:"project.meta.twitterUsername"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Example: @example"},domProps:{value:t.project.meta.twitterUsername},on:{input:function(e){e.target.composing||t.$set(t.project.meta,"twitterUsername",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-3"},[a("label",[t._v("Share Text")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.project.meta.shareText,expression:"project.meta.shareText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Example: Join our crowdfund on BlockHub today!"},domProps:{value:t.project.meta.shareText},on:{input:function(e){e.target.composing||t.$set(t.project.meta,"shareText",e.target.value)}}}),t._v(" "),a("span",{staticClass:"form-text"})])])]):t._e(),t._v(" "),t.advanced?a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[a("c-switch",{staticClass:"switch-sm",attrs:{checked:t.project.meta.overflowEnabled},on:{change:function(e){return t.project.meta.overflowEnabled=e}}})],1),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("label",[t._v("Overflow")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with Overflow enabled will accept more than the funding goal (over-contribution)")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[a("c-switch",{staticClass:"switch-sm",attrs:{checked:t.project.meta.timelineEnabled},on:{change:function(e){return t.project.meta.timelineEnabled=e}}})],1),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("label",[t._v("Timeline")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with Timeline enabled will have a current timeline with associated milestones.")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[a("c-switch",{staticClass:"switch-sm",attrs:{checked:t.project.meta.refundsEnabled},on:{change:function(e){return t.project.meta.refundsEnabled=e}}})],1),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("label",[t._v("Refunds")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with Refunds enabled will allow contributors to get partial or full refund if the project is deemed not successful (by community vote).")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[a("c-switch",{staticClass:"switch-sm",attrs:{checked:t.project.meta.curationEnabled},on:{change:function(e){return t.project.meta.curationEnabled=e}}})],1),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("label",[t._v("Curation")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with Curation enabled will allow the community to curate the project and earn reputation for their actions.")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"switch switch-sm col-sm-1"}),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("input",{attrs:{type:"text",id:"ise_default",name:"ise_default",value:""}}),t._v(" "),a("label",[t._v("Contribution Period")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with Curation Enabled will allow the community to curate the project and earn reputation for their actions.")])])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-1"},[a("c-switch",{staticClass:"switch-sm",attrs:{checked:t.project.meta.contributionPeriodEnabled},on:{change:function(e){return t.project.meta.contributionPeriodEnabled=e}}})],1),t._v(" "),a("div",{staticClass:"col-sm-11"},[a("label",[t._v("No Contribution Period")]),t._v(" "),a("span",{staticClass:"form-text"},[t._v("Projects with No Contribution Period will be open for contribution until the project is completed, allowing for contributions during the project.")])])])]):t._e(),t._v(" "),t.advanced?a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group row",staticStyle:{"text-align":"center"}},[a("br"),t._v(" "),a("h3",{staticStyle:{width:"100%"}},[t._v("Raw Data Editor")]),t._v(" "),a("br"),a("br"),t._v(" "),a("textarea",{attrs:{rows:"10",cols:"50"},domProps:{value:JSON.stringify(t.project)},on:{input:function(e){t.updateProjectRaw(e.target.value)}}}),t._v(" "),a("br"),a("br"),t._v(" "),a("span",{staticClass:"form-text"}),t._v(" "),a("c-json-editor",{staticStyle:{margin:"0 auto"},attrs:{objData:t.project},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"col-12",attrs:{hidden:""}},[a("div",{directives:[{name:"darklaunch",rawName:"v-darklaunch",value:"GOVERNANCE",expression:"'GOVERNANCE'"}],staticClass:"row"},[a("div",{staticClass:"col-12"},[t._v("\n                    Choose your governance system\n                ")]),t._v(" "),a("div",{staticClass:"col-4"},[a("i",{staticClass:"fas first-order"})])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("c-heading-bar-color",{staticClass:"mt-4 mb-4",attrs:{colorCode:"#444",textAlign:"center"}},[t._v("Blockchain Options")]),t._v(" "),t.blockchain?a("div",[a("p",[t._v("Project found. ID: "+t._s(t.blockchain.id))]),t._v(" "),a("c-button",{attrs:{status:"outline-info"},on:{click:t.updateBlockchain}},[t._v("\n                    Update\n                ")])],1):t._e(),t._v(" "),t.blockchain?t._e():a("div",[a("strong",[t._v("Project not found within Funding Protocol.")]),t._v(" "),a("c-button",{attrs:{status:"outline-info",size:"sm"},on:{click:t.syncBlockchain}},[t._v("\n                    Sync\n                ")]),t._v(" "),a("c-button",{attrs:{status:"outline-info",size:"sm"},on:{click:t.createBlockchain}},[t._v("\n                    Deploy\n                ")])],1)],1)]),t._v(" "),a("template",{slot:"menu"},[a("div",{staticClass:"row"},[t.project.id?a("div",{staticClass:"col-12 text-right"},[a("c-button",{attrs:{status:"info",href:"/project/"+t.project.id,target:"_blank",icon:"open"}},[t._v("\n                    View Page\n                ")]),t._v(" "),a("c-button",{attrs:{status:"success",icon:"save"},on:{click:t.save}},[t._v("\n                    Save\n                ")])],1):t._e(),t._v(" "),t.project.id?t._e():a("div",{staticClass:"col-12 text-right"},[a("c-button",{attrs:{status:"success",size:"md",icon:"plus"},on:{click:t.create}},[t._v("\n                    Create\n                ")])],1)])])],2)},[],!1,null,null,null);e.default=v.exports},244:function(t,e){},74:function(t,e){},996:function(t,e,a){"use strict";var s=a(244);a.n(s).a}}]);