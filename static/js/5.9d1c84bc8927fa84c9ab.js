(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{14:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var s={data:function(){return{timeout:0}},methods:{debounce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"timeout";clearTimeout(this[n]),this[n]=setTimeout(e,t)}}},i={methods:{handleArray:function(e,t){var n=this[t].indexOf(e);n>-1?this[t].splice(n,1):this[t].push(e)}}}},415:function(e,t,n){"use strict";var s=n(44);n.n(s).a},44:function(e,t){},730:function(e,t,n){"use strict";n.r(t);var s=n(21),i=n.n(s),a=n(4),c=n.n(a),r=n(22),l=n.n(r),u=n(8),o={components:{"c-layout":function(e){return Promise.resolve().then(function(){var t=[n(746)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-checkbox":function(e){return n.e(119).then(function(){var t=[n(623)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-block":function(e){return n.e(87).then(function(){var t=[n(641)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-searcher":function(e){return n.e(141).then(function(){var t=[n(257)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-input-searcher":function(e){return n.e(94).then(function(){var t=[n(589)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-game-grid":function(e){return n.e(101).then(function(){var t=[n(627)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-spinner":function(e){return n.e(177).then(function(){var t=[n(662)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-option-tag":function(e){return n.e(118).then(function(){var t=[n(644)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-range-slider":function(e){return n.e(140).then(function(){var t=[n(626)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-list":function(e){return n.e(117).then(function(){var t=[n(654)];e.apply(null,t)}.bind(this)).catch(n.oe)},"c-content-navigation":function(e){return n.e(90).then(function(){var t=[n(624)];e.apply(null,t)}.bind(this)).catch(n.oe)}},mixins:[n(14).b],data:function(){return{systemTags:[{value:"featured",selected:!1},{value:"new",selected:!1},{value:"sale",selected:!1},{value:"specials",selected:!1},{value:"top_seller",selected:!1},{value:"trending",selected:!1},{value:"upcoming",selected:!1}],phrase:"",results:[],isTyping:!1,selectableTags:[],selectableLanguages:[],price:{min:0,max:0},expandFilters:!1,timeout2:0,communitySize:0,activeUsers:0}},methods:{search:function(){var e=this;this.debounce(function(){e.isTyping||(e.isTyping=!0),e.filtersActive?e.debounce(function(){e.isTyping=!1,e.results=[].concat(l()(e.getProductsQuery(e.query)))},200,"timeout2"):(e.isTyping=!1,e.results=e.products),e.$router.replace({name:"Search Page",query:e.urlQuery})},500)},clearFilters:function(){var e=this.phrase,t=this.selectedSpecials,n=this.selectedGenres,s=this.selectedLanguages,i=this.price,a=this.communitySize,c=this.activeUsers;e.length&&(this.phrase=""),t.length&&this.selectedSpecials.forEach(function(e){return e.selected=!1}),n.length&&this.selectedGenres.forEach(function(e){return e.selected=!1}),s.length&&this.selectedLanguages.forEach(function(e){return e.selected=!1}),(i.min||i.max)&&(this.price.min=0,this.price.max=0),(a||c)&&(this.communitySize=0,this.activeUsers=0)}},computed:c()({},Object(u.c)({getProductsQuery:"marketplace/getProductsQuery",products:"marketplace/productsArray",productsTags:"marketplace/productsTags",languages:"marketplace/productsLanguages"}),{query:function(){var e=this.phrase,t=this.selectedSpecials,n=this.selectedGenres,s=(this.selectedLanguages,this.price),i={};return e.length&&(i.name={$eq:e}),t.length&&(i.system_tags={$contains:t.map(function(e){return e.value})}),n.length&&(i.developer_tags={$contains:n.map(function(e){return e.name})}),(s.min||s.max)&&(i.price={$between:[s.min,300|s.max]}),i},resultsFiltered:function(){var e=this;return this.selectedLanguagesNames.length?this.results.filter(function(t){return t.language_support.filter(function(t){return e.selectedLanguagesNames.includes(t.name)}).length}):this.results},selectedGenres:function(){return this.selectableTags.filter(function(e){return e.selected})},selectedSpecials:function(){return this.systemTags.filter(function(e){return e.selected})},selectedLanguages:function(){return this.selectableLanguages.filter(function(e){return e.selected})},selectedLanguagesNames:function(){return this.selectedLanguages.map(function(e){return e.name})},filtersActive:function(){return!!(this.selectedGenres.length||this.phrase.length||this.selectedSpecials.length||this.price.max||this.price.min||this.selectedLanguages.length||this.communitySize||this.activeUsers)},urlQuery:function(){var e={},t=this.phrase,n=this.selectedSpecials,s=this.selectedGenres,i=this.selectedLanguages,a=this.price,c=this.communitySize,r=this.activeUsers;return t.length&&(e.name=t),a.min&&(e.priceMin=a.min),a.max&&(e.priceMax=a.max),n.length&&(e.specials=n.map(function(e){return e.value})),s.length&&(e.tags=s.map(function(e){return e.name})),i.length&&(e.langs=i.map(function(e){return e.name})),c&&(e.communitySize=c),r&&(e.activeUsers=r),e}}),mounted:function(){if(i()(this.$route.query).length){this.isTyping=!0;var e=this.$route.query,t=e.tags,n=e.langs,s=e.name,a=e.priceMin,c=e.priceMax,r=e.specials,l=e.showFilters,u=e.activeUsers,o=e.communitySize;s&&(this.phrase=s),a&&(this.price.min=a),c&&(this.price.max=c),this.selectableTags=this.productsTags.map(function(e){return{name:e,selected:t&&t.includes(e)}}),this.selectableLanguages=this.languages.map(function(e){return{name:e,selected:!(!n||!n.includes(e))}}),l&&(this.expandFilters=!0),u&&(this.activeUsers=u),o&&(this.communitySize=o),r&&this.systemTags.forEach(function(e){r.includes(e.value)&&(e.selected=!0)})}else this.results=this.products},watch:{urlQuery:{handler:"search",deep:!0}},filters:{replaceLoDash:function(e){return e.replace(/_/g," ")}}},h=(n(415),n(0)),d=Object(h.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("c-layout",[n("div",{staticClass:"content",attrs:{id:"content"}},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("c-block",{staticClass:"searching-box",attrs:{title:"Search"}},[n("div",{staticClass:"search__main"},[n("c-input-searcher",{attrs:{placeholder:"Search for games","aria-placeholder":"Search for games"},model:{value:e.phrase,callback:function(t){e.phrase=t},expression:"phrase"}}),e._v(" "),n("c-button",{attrs:{status:"success",size:"lg",icon:"sliders-h","data-toggle":"collapse","data-target":"#expand-filters","aria-expanded":"false","aria-controls":"collapseFilters"},on:{click:function(t){e.expandFilters=!e.expandFilters}}},[e._v("Filters")])],1),e._v(" "),n("transition",{attrs:{name:"slide-in-top"}},[e.expandFilters?n("div",{staticClass:"search-filters__container"},[n("div",{staticClass:"filter-box"},[n("h4",[e._v("\n                                    Specials:\n                                    "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedSpecials.length,expression:"selectedSpecials.length"}]},[e._v("\n                                        ("+e._s(e.selectedSpecials.length)+")\n                                    ")])]),e._v(" "),e._l(e.systemTags,function(t,s){return n("c-checkbox",{key:s,attrs:{id:"specials-"+t.value},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"tag.selected"}},[e._v("\n                                    "+e._s(e._f("upperFirstChar")(e._f("replaceLoDash")(t.value)))+"\n                                ")])})],2),e._v(" "),n("div",{staticClass:"filter-box"},[n("h4",[e._v("\n                                    Price range:\n                                    "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.price.min&&e.price.max,expression:"price.min && price.max"}]},[e._v("\n                                        ("+e._s(e.price.min)+" - "+e._s(e.price.max)+")\n                                    ")])]),e._v(" "),n("p",{staticClass:"margin-top-20"},[e._v("Minimum:")]),e._v(" "),n("c-range-slider",{attrs:{min:0,max:60},model:{value:e.price.min,callback:function(t){e.$set(e.price,"min",e._n(t))},expression:"price.min"}}),e._v(" "),n("p",{staticClass:"margin-top-20"},[e._v("Maximum:")]),e._v(" "),n("c-range-slider",{attrs:{max:300},model:{value:e.price.max,callback:function(t){e.$set(e.price,"max",e._n(t))},expression:"price.max"}})],1),e._v(" "),n("div",{staticClass:"filter-box"},[n("h4",[e._v("\n                                    Genres:\n                                    "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedGenres.length,expression:"selectedGenres.length"}]},[e._v("\n                                        ("+e._s(e.selectedGenres.length)+")\n                                    ")])]),e._v(" "),n("c-list",{attrs:{items:e.selectableTags},on:{click:function(e){return e.selected=!e.selected}}})],1),e._v(" "),n("div",{staticClass:"filter-box"},[n("h4",[e._v("\n                                    Languages:\n                                    "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedLanguages.length,expression:"selectedLanguages.length"}]},[e._v("\n                                        ("+e._s(e.selectedLanguages.length)+")\n                                    ")])]),e._v(" "),n("div",[n("c-list",{attrs:{items:e.selectableLanguages},on:{click:function(e){return e.selected=!e.selected}}})],1)]),e._v(" "),n("div",{staticClass:"filter-box"},[n("h4",[e._v("Community:")]),e._v(" "),n("p",{staticClass:"margin-top-20"},[e._v("Community Size:")]),e._v(" "),n("c-range-slider",{attrs:{max:1e3},model:{value:e.communitySize,callback:function(t){e.communitySize=e._n(t)},expression:"communitySize"}}),e._v(" "),n("p",{staticClass:"margin-top-20"},[e._v("Active Users:")]),e._v(" "),n("c-range-slider",{attrs:{max:5e3},model:{value:e.activeUsers,callback:function(t){e.activeUsers=e._n(t)},expression:"activeUsers"}})],1)]):e._e()])],1),e._v(" "),n("transition",{attrs:{name:"slide-in-top"}},[e.filtersActive?n("div",{staticClass:"active-filters"},[n("h3",[e._v("Active filters")]),e._v(" "),n("div",{staticClass:"active-filters__content"},[e.phrase.length?n("c-option-tag",{attrs:{title:"NAME:",text:e.phrase},on:{delete:function(t){e.phrase=""}}}):e._e(),e._v(" "),e.selectedGenres.length?n("c-option-tag",{attrs:{title:"GENRES:"},on:{delete:function(t){e.selectedGenres.forEach(function(e){return e.selected=!1})}}},e._l(e.selectedGenres,function(e,t){return n("c-option-tag",{key:t,attrs:{text:e.name,isChildren:""},on:{delete:function(t){e.selected=!1}}})})):e._e(),e._v(" "),e.selectedSpecials.length?n("c-option-tag",{attrs:{title:"SPECIALS:"},on:{delete:function(t){e.selectedSpecials.forEach(function(e){return e.selected=!1})}}},e._l(e.selectedSpecials,function(t,s){return n("c-option-tag",{key:s,attrs:{text:e._f("upperFirstChar")(e._f("replaceLoDash")(t.value)),isChildren:""},on:{delete:function(e){t.selected=!1}}})})):e._e(),e._v(" "),e.price.min>0||e.price.max>0?n("c-option-tag",{attrs:{title:"PRICE RANGE:"},on:{delete:function(t){e.price.min=0,e.price.max=0}}},[e.price.min?n("c-option-tag",{attrs:{title:"Minimum:",text:e.price.min,isChildren:""},on:{delete:function(t){e.price.min=0}}}):e._e(),e._v(" "),e.price.max?n("c-option-tag",{attrs:{title:"Maximum:",text:e.price.max,isChildren:""},on:{delete:function(t){e.price.max=0}}}):e._e()],1):e._e(),e._v(" "),e.selectedLanguages.length?n("c-option-tag",{attrs:{title:"LANGUAGES:"},on:{delete:function(t){e.selectableLanguages.forEach(function(e){return e.selected=!1})}}},e._l(e.selectedLanguages,function(e,t){return n("c-option-tag",{key:t,attrs:{text:e.name,isChildren:""},on:{delete:function(t){e.selected=!1}}})})):e._e(),e._v(" "),e.communitySize||e.activeUsers?n("c-option-tag",{attrs:{title:"COMMUNITY:"},on:{delete:function(t){e.communitySize=0,e.activeUsers=0}}},[e.communitySize?n("c-option-tag",{attrs:{title:"Size:",text:e.communitySize,isChildren:""},on:{delete:function(t){e.communitySize=0}}}):e._e(),e._v(" "),e.activeUsers?n("c-option-tag",{attrs:{title:"Active users:",text:e.activeUsers,isChildren:""},on:{delete:function(t){e.activeUsers=0}}}):e._e()],1):e._e()],1)]):e._e()]),e._v(" "),n("h3",[e._v("Results")]),e._v(" "),n("div",{staticClass:"results__container"},[n("div",{staticClass:"results"},[e.isTyping?n("c-spinner"):e.resultsFiltered.length?n("c-content-navigation",{attrs:{items:e.resultsFiltered,setItemsLimit:12,setItemsPerPage:12},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.items;return n("c-game-grid",{attrs:{itemInRow:2,showRating:!1,items:t,itemBg:"transparent",showTime:""}})}}])}):n("div",[n("p",[e._v("No results were found for provided filters")]),e._v(" "),n("c-button",{attrs:{status:"info"},on:{click:function(t){e.clearFilters()}}},[e._v("Clear filters")]),e._v(" "),n("c-button",[e._v("Check for updates")])],1)],1)])],1)])])])])},[],!1,null,"286c0180",null);t.default=d.exports}}]);