(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1423:function(t,e,s){(t.exports=s(15)(!1)).push([t.i,"",""])},1424:function(t,e,s){"use strict";var a=s(862);s.n(a).a},583:function(t,e,s){"use strict";s.r(e);var a=s(4),o=s.n(a),r=s(9),i=s.n(r),c=s(13),n=s.n(c),l=s(2),d=s.n(l),u={props:{id:[String,Number]},components:{"c-business-layout":function(t){return s.e(207).then(function(){var e=[s(2238)];t.apply(null,e)}.bind(this)).catch(s.oe)}},data:function(){return{product:"new"===this.id?this.$store.state.marketplace.defaultProduct:this.$store.getters["products/get"](this.id),loadingState:!0,notice:"",advanced:!1,blockchain:!1,tagOptions:[],creating:"new"===this.id,successfulCreationMessage:!1}},computed:{originalProduct:function(){return"new"===this.id?this.$store.state.marketplace.defaultProduct:this.$store.getters["products/get"](this.id)}},watch:{originalProduct:function(){this.product=d()({},this.product,this.originalProduct)}},created:function(){"new"!==this.id&&this.$store.dispatch("products/find",{query:{id:Number(this.id),$eager:"tags"}})},methods:{transferOwnership:function(){var t=this,e={code:function(t,e,s,a,r,c,l,d,u,p,v){var m,f=this,h=v.product,g=v.profile;return new n.a((m=i()(o.a.mark(function t(e,s){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.api.ethereum.state.contracts.MarketplaceStorage.deployed,t.next=3,marketplaceStorage.setDeveloperOwnsProduct(h.developerId,h.id,!0,{from:g.address});case 3:return t.next=5,marketplaceStorage.pushDeveloperOwnedProduct(h.developerId,h.id,{from:g.address});case 5:return t.next=7,marketplaceStorage.setProductDeveloper(h.id,h.developer,{from:g.address});case 7:return t.next=9,marketplaceStorage.setProductDeveloperId(h.id,h.developerId,{from:g.address});case 9:e(h);case 10:case"end":return t.stop()}},t,f)})),function(t,e){return m.apply(this,arguments)}))}.toString(),params:{profile:this.$store.state.application.activeProfile,product:this.product}};window.BlockHub.Bridge.sendCommand("eval",e).then(function(e){e.id&&(t.successfulCreationMessage="Product ownership has been changed")})},updateStatus:function(){var t=this,e={code:function(t,e,s,a,r,c,l,d,u,p,v){var m,f=this,h=v.product,g=v.profile;return new n.a((m=i()(o.a.mark(function t(e,s){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.api.ethereum.state.contracts.MarketplaceStorage.deployed,t.next=3,a.setProductStatus(productId,Number(h.status),{from:g.address});case 3:e(h);case 4:case"end":return t.stop()}},t,f)})),function(t,e){return m.apply(this,arguments)}))}.toString(),params:{profile:this.$store.state.application.activeProfile,product:this.product}};window.BlockHub.Bridge.sendCommand("eval",e).then(function(e){e.id&&(t.successfulCreationMessage="Product status has been updated")})},create:function(){var t=this;this.product.ownerId=this.$store.state.application.activeProfile.id,this.$store.dispatch("products/create",this.product).then(function(e){t.product.id=e.id,t.notice="Congratulations, your product has been created!",t.$router.push("/business/product/"+t.product.id)})},save:function(){var t=this;this.$store.dispatch("products/update",[this.product.id,this.product,{query:{$eager:"tags"}}]).then(function(){t.notice="Product has been saved."})}},mounted:function(){var t=this;this.$nextTick(function(){t.loadingState=!1,document.getElementById("startup-loader").style.display="none"})}},p=(s(1424),s(7)),v=Object(p.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-business-layout",[s("div",{staticClass:"row"},[t.successfulCreationMessage?s("div",{staticClass:"col-md-12"},[s("p",{staticClass:"alert alert-info"},[t._v(t._s(t.successfulCreationMessage))]),t._v(" "),s("br"),s("br")]):t._e(),t._v(" "),s("div",{staticClass:"col-md-6"},[t.product.id?s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Change Status")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.product.status,expression:"product.status"}],staticClass:"form-control",attrs:{name:"change_status"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"status",e.target.multiple?s:s[0])},t.updateStatus]}},[s("option",{attrs:{value:"",selected:""}},[t._v("Choose Status")]),t._v(" "),s("option",{attrs:{value:"0"}},[t._v("Inactive")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("Draft")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("Pending")]),t._v(" "),s("option",{attrs:{value:"3"}},[t._v("Published")]),t._v(" "),s("option",{attrs:{value:"4"}},[t._v("Rejected")])])])]):t._e(),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Title")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}}),t._v(" "),s("span",{staticClass:"form-text"})])]),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Type")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.product.type,expression:"product.type"}],staticClass:"form-control actionWithSelected",attrs:{tabindex:"-1","aria-hidden":"true"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"type",e.target.multiple?s:s[0])}}},[s("option"),t._v(" "),s("option",{attrs:{value:"game"}},[t._v("Game")]),t._v(" "),s("option",{attrs:{value:"app"}},[t._v("App")]),t._v(" "),s("option",{attrs:{value:"tool"}},[t._v("Tool")])])])]),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Description")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}}),t._v(" "),s("span",{staticClass:"form-text"})])]),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Content")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.content,expression:"product.content"}],staticClass:"form-control",domProps:{value:t.product.content},on:{input:function(e){e.target.composing||t.$set(t.product,"content",e.target.value)}}}),t._v(" "),s("span",{staticClass:"form-text"})])])]),t._v(" "),s("div",{staticClass:"col-md-6"}),t._v(" "),s("div",{staticClass:"col-12"},[t.product.id?s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[t._v("\n                    Ownership\n                ")]),t._v(" "),s("div",{staticClass:"col-6"},[t._v("\n                    Owned by address: "+t._s(t.product.developer)),s("br"),t._v("\n                    Created by Developer ID: "+t._s(t.product.developerId)+"\n                ")]),t._v(" "),s("div",{staticClass:"col-12"},[s("h3",[t._v("Transfer Ownership")]),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Developer Address")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.developer,expression:"product.developer"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.product.developer},on:{input:function(e){e.target.composing||t.$set(t.product,"developer",e.target.value)}}}),t._v(" "),s("span",{staticClass:"form-text"})])]),t._v(" "),s("div",{staticClass:"form-group row align-items-center"},[s("label",{staticClass:"col-sm-3"},[s("label",[t._v("Developer ID")])]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.product.developerId,expression:"product.developerId"}],staticClass:"form-control",attrs:{type:"text",placeholder:""},domProps:{value:t.product.developerId},on:{input:function(e){e.target.composing||t.$set(t.product,"developerId",e.target.value)}}}),t._v(" "),s("span",{staticClass:"form-text"})])]),t._v(" "),s("c-button",{on:{click:t.transferOwnership}},[t._v("Transfer")])],1)]):t._e()])]),t._v(" "),s("template",{slot:"menu"},[s("div",{staticClass:"row"},[t.product.id?s("div",{staticClass:"col-12 text-right"},[s("c-button",{attrs:{status:"success",icon:"save"},on:{click:t.save}},[t._v("\n                    Save\n                ")])],1):t._e(),t._v(" "),t.product.id?t._e():s("div",{staticClass:"col-12 text-right"},[s("c-button",{attrs:{status:"success",size:"md",icon:"plus"},on:{click:t.create}},[t._v("\n                    Create\n                ")])],1)])])],2)},[],!1,null,"3726ff1d",null);e.default=v.exports},862:function(t,e,s){var a=s(1423);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(14)("6ff82ad4",a,!0,{})}}]);