(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{1421:function(t,s,n){"use strict";var e=n(440);n.n(e).a},1709:function(t,s,n){"use strict";n.r(s);var e={name:"benchmark",props:{settings:Object},data:function(){return{fps:0,fpsVals:[],running:!1,finished:!1,results:{avgFps:0,grade:""},btnMsg:"UPDATE SETTINGS AUTOMATICALLY"}},methods:{benchmark:function(){var t=this;this.running=!0,this.finished=!1,this.fpsVals=[];var s=[],n=0,e=0;!function i(){window.requestAnimationFrame(function(){e++;for(var a=performance.now();s.length>0&&s[0]<=a-1e3;)s.shift();s.push(a),n=s.length,t.fps=n,e>60&&t.fpsVals.push(n),e>500?(t.running=!1,t.finished=!0,t.getResults()):i()})}()},getResults:function(){var t=Math.round(this.fpsVals.reduce(function(t,s){return t+s},0)/this.fpsVals.length),s="good";t<50&&t>30?s="avg":t<30&&(s="bad"),this.results.avgFps=t,this.results.grade=s,this.results.text="good"==s?"There is no need to lower your settings":"You should consider lowering your settings (preferably by auto-update option)",this.autoUpdateSettings()},updateSettings:function(t,s){this.$store.commit("application/updateClientSettings",{key:t,value:s})},toggleAutoUpdateSettings:function(){this.updateSettings("auto_update_settings")},autoUpdateSettings:function(){var t=this,s=this.settings;if(s.client.auto_update_settings&&this.finished&&!this.running){var n=this.results.grade,e=["autoplay","animations"],i=function(s){return e.forEach(function(n){t.updateSettings(n,s)})};"good"===n?i(!0):"avg"===n?(s.client.autoplay&&this.updateSettings("autoplay",!1),s.client.animations&&this.updateSettings("animations",!1)):i(!1),this.$snotify.success("Settings were successfully updated","Settings updated",{timeout:2500,pauseOnHover:!0})}}}},i=(n(1421),n(0)),a=Object(i.a)(e,function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"d-flex flex-column pb-4"},[n("div",{staticClass:"h4 font-weight-bold mt-2 mb-0 text-left w-100"},[t._v("\n        Performance Test\n    ")]),t._v(" "),n("div",{staticClass:"w-100"},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"benchmark__status mr-4"},[t._v("STATUS: "+t._s(t.running?"Running":t.finished?"Finished":"Waiting to start"))]),t._v(" "),t.running?n("div",{staticClass:"mr-4"},[t._v("FPS: "+t._s(t.fps))]):t.finished?n("div",{staticClass:"mr-4"},[t._v("\n                Average fps: "),n("strong",{staticClass:"benchmark__fps",class:t.results.grade},[t._v(t._s(t.results.avgFps))]),n("br"),t._v("\n                "+t._s(t.results.text)+"\n            ")]):n("div",[t._v("Run this benchmark to check your performance")])])]),t._v(" "),n("div",{staticClass:"w-100 mt-3"},[n("c-button",{staticClass:"mr-4",class:{"avoid-clicks":t.running},attrs:{icon:"play"},on:{click:t.benchmark}},[t._v("\n            "+t._s(t.finished?"Try again":t.running?"Running...":"Run Test")+"\n        ")]),t._v(" "),t.settings.client.auto_update_settings?n("c-button",{attrs:{status:"success"},on:{click:t.toggleAutoUpdateSettings}},[t._v("\n            SETTINGS UPDATED AUTOMATICALLY\n        ")]):t._e(),t._v(" "),t.settings.client.auto_update_settings?t._e():n("c-button",{attrs:{status:"warning"},on:{click:t.toggleAutoUpdateSettings}},[t._v("\n            SETTINGS NOT UPDATED AUTOMATICALLY\n        ")])],1)])},[],!1,null,"74e14b36",null);s.default=a.exports},440:function(t,s){}}]);