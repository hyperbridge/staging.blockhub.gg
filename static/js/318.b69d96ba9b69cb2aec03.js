(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{1304:function(t,e,i){"use strict";var n=i(405);i.n(n).a},1305:function(t,e,i){"use strict";var n=i(406);i.n(n).a},1678:function(t,e,i){"use strict";i.r(e);var n=i(2),s=i.n(n),r=i(30),o={name:"GridItem",props:{index:{type:Number},sort:{type:Number},cellWidth:{type:Number},cellHeight:{type:Number},rowCount:{type:Number},rowShift:{type:Number,default:0},draggable:{type:Boolean},dragDelay:{type:Number,default:0}},data:function(){return{animate:!0,dragging:!1,shiftStartX:0,shiftStartY:0,mouseMoveStartX:0,mouseMoveStartY:0,shiftX:0,shiftY:0,timer:null,zIndex:1}},mounted:function(){var t=this;this.$refs.self.addEventListener("transitionend",function(e){t.dragging||(t.zIndex=1)},!1)},computed:{className:function(){return["c-grid-item-wrapper",{"c-grid-item-animate":this.animate,"c-grid-item-dragging":this.dragging}]},style:function(){var t=this.zIndex,e=this.cellWidth,i=this.cellHeight,n=this.top;return{zIndex:t,width:e+"px",height:i+"px",transform:"translate3d("+this.left+"px, "+n+"px, 0)"}},left:function(){return this.dragging?this.shiftX:this.rowShift+this.sort%this.rowCount*this.cellWidth},top:function(){return this.dragging?this.shiftY:Math.floor(this.sort/this.rowCount)*this.cellHeight}},methods:{wrapEvent:function(t){return{event:t,index:this.index,sort:this.sort}},dragStart:function(t){var e=t.touches?t.touches[0]:t;this.zIndex=2,this.shiftX=this.shiftStartX=this.left,this.shiftY=this.shiftStartY=this.top,this.mouseMoveStartX=e.pageX,this.mouseMoveStartY=e.pageY,this.animate=!1,this.dragging=!0,document.addEventListener("mousemove",this.documentMouseMove),document.addEventListener("touchmove",this.documentMouseMove),this.$emit("dragstart",this.wrapEvent(t))},drag:function(t){var e=t.touches?t.touches[0]:t,i=e.pageX-this.mouseMoveStartX,n=e.pageY-this.mouseMoveStartY;this.shiftX=i+this.shiftStartX,this.shiftY=n+this.shiftStartY;var s=Math.round(this.shiftX/this.cellWidth),r=Math.round(this.shiftY/this.cellHeight),o=(s=Math.min(s,this.rowCount-1))+(r=Math.max(r,0))*this.rowCount,h={event:t,distanceX:i,distanceY:n,positionX:this.shiftX,positionY:this.shiftY,index:this.index,gridX:s,gridY:r,gridPosition:o};this.$emit("drag",h)},mousedown:function(t){var e=this;this.draggable&&(this.timer=setTimeout(function(){e.dragStart(t)},this.dragDelay),document.addEventListener("mouseup",this.documentMouseUp),document.addEventListener("touchend",this.documentMouseUp))},documentMouseMove:function(t){this.draggable&&this.dragging&&this.drag(t)},documentMouseUp:function(t){this.timer&&(clearTimeout(this.timer),this.timer=null);var e=this.shiftStartX-this.shiftX,i=this.shiftStartY-this.shiftY,n=Math.sqrt(e*e+i*i);this.animate=!0,this.dragging=!1,this.mouseMoveStartX=0,this.mouseMoveStartY=0,this.shiftStartX=0,this.shiftStartY=0,document.removeEventListener("mousemove",this.documentMouseMove),document.removeEventListener("touchmove",this.documentMouseMove),document.removeEventListener("mouseup",this.documentMouseUp),document.removeEventListener("touchend",this.documentMouseUp);var s=this.wrapEvent(t);n<4&&this.$emit("click",s),this.$emit("dragend",s)}}},h=(i(1305),i(0)),a=Object(h.a)(o,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"self",class:t.className,style:t.style,on:{mousedown:t.mousedown,touchstart:function(e){return e.stopPropagation(),t.mousedown(e)}}},[t._t("default")],2)},[],!1,null,null,null).exports,u={mixins:[r.c],components:{GridItem:a},props:{items:{type:Array,default:function(){return[]}},gridWidth:{type:Number,default:-1},cellWidth:{type:Number,default:80},cellHeight:{type:Number,default:80},draggable:{type:Boolean,default:!1},dragDelay:{type:Number,default:0},sortable:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},data:function(){return{list:[]}},watch:{items:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.list=t.map(function(t,e){return{item:t,index:e,sort:e}})},immediate:!0}},computed:{gridResponsiveWidth:function(){return 80},gridHeight:function(){return Math.ceil(this.items.length/this.rowCount)*this.cellHeight},gridStyle:function(){return{height:this.gridHeight+"px"}},containerStyle:function(){return{height:window.innerHeight+"px"}},rowCount:function(){return Math.floor(this.gridResponsiveWidth/this.cellWidth)},rowShift:function(){if(this.center){var t=this.items.length*this.cellWidth,e=t<this.gridResponsiveWidth?(this.gridResponsiveWidth-t)/2:this.gridResponsiveWidth%this.cellWidth/2;return Math.floor(e)}return 0}},methods:{wrapEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()({datetime:Date.now(),items:this.getListClone()},t)},getListClone:function(){return this.list.slice(0).sort(function(t,e){return t.sort-e.sort})},removeItem:function(t){var e=t.index,i=this.list.find(function(t){return t.index===e}),n=i.sort;this.list=this.list.filter(function(t){return t.index!==e}).map(function(t){var e=t.sort>n?t.sort-1:t.sort;return s()({},t,{sort:e})}),this.$emit("remove",this.wrapEvent({index:e}))},onDragStart:function(t){this.$emit("dragstart",this.wrapEvent(t))},onDragEnd:function(t){this.$emit("dragend",this.wrapEvent(t))},click:function(t){this.$emit("click",this.wrapEvent(t))},onDrag:function(t){this.sortable&&this.sortList(t.index,t.gridPosition),this.$emit("drag",this.wrapEvent({event:t}))},sortList:function(t,e){var i=this.list.find(function(e){return e.index===t}),n=i.sort;e=Math.max(e,0),e=Math.min(e,this.list.length-1),n!==e&&(this.list=this.list.map(function(t){if(t.index===i.index)return s()({},t,{sort:e});var r=t.sort;return n>e&&r<=n&&r>=e?s()({},t,{sort:r+1}):n<e&&r>=n&&r<=e?s()({},t,{sort:r-1}):t}),this.$emit("sort",this.wrapEvent()))}}},d=(i(1304),Object(h.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-grid-container",style:t.containerStyle},[i("div",{staticClass:"c-grid",style:t.gridStyle},t._l(t.list,function(e){return i("GridItem",{key:e.index,attrs:{index:e.index,sort:e.sort,draggable:t.draggable,"drag-delay":t.dragDelay,"row-count":t.rowCount,"cell-width":t.cellWidth,"cell-height":t.cellHeight,"window-width":t.windowWidth,"row-shift":t.rowShift},on:{dragstart:t.onDragStart,dragend:t.onDragEnd,drag:t.onDrag,click:t.click}},[t._t("cell",null,{item:e.item,index:e.index,sort:e.sort,remove:function(){t.removeItem(e)}})],2)}))])},[],!1,null,null,null));e.default=d.exports},405:function(t,e){},406:function(t,e){}}]);