(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1294:function(t,e,i){"use strict";i.r(e);var n=i(5),o=i(7),s=i(3),a={props:["id","section"],components:{"c-product-overview":function(t){return i.e(214).then(function(){var e=[i(1158)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-product-projects":function(t){return i.e(213).then(function(){var e=[i(1162)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-product-assets":function(t){return i.e(212).then(function(){var e=[i(1163)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-product-community":function(t){return i.e(211).then(function(){var e=[i(1164)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-tags-list":function(t){return i.e(7).then(function(){var e=[i(1172)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-custom-modal":function(t){return i.e(168).then(function(){var e=[i(1244)];t.apply(null,e)}.bind(this)).catch(i.oe)},"c-popup":function(t){return i.e(8).then(function(){var e=[i(118)];t.apply(null,e)}.bind(this)).catch(i.oe)}},data:function(){return{activeElement:{name:!1,background_image:!1,tags:!1},author_tag_options:["rpg","adventure","racing","action"],importing:!1,savedState:!1}},computed:{marketplace:function(){return this.$store.state.marketplace},product:function(){return"new"===this.id?this.marketplace.default_product:this.marketplace.products[this.id]},editor_mode:function(){return this.$store.state.application.editor_mode},editing:function(){if(!this.$store.state.application.editor_mode)for(var t in this.activeElement)this.activeElement[t]=!1;return"editing"===this.$store.state.application.editor_mode},first_product:function(){return this.$store.state.marketplace.first_product},breadcrumbLinks:function(){var t=[{to:{path:"/"},title:"Store"},{to:{path:"/product/"+this.id},title:this.product.name}];return"community"===this.section?t.push({to:{path:""},title:"Community"}):"projects"===this.section?t.push({to:{path:""},title:"Crowdfunding"}):"assets"===this.section&&t.push({to:{path:""},title:"Inventory"}),t}},mounted:function(){var t,e,i=this.product;if("new"===this.id&&this.$store.dispatch("application/setEditorMode","editing"),i.community||(i.community={discussions:[]}),i.developer_tags||(i.developer_tags=[]),i.promotions&&(this.promotionSections=(t=i.promotions,e="section",t.reduce(function(t,i){return i[e]?((t[i[e]]=t[i[e]]||[]).push(i),t):t},{})||null)),i&&i.images.preview&&i.images.preview.length){var n=window.document.getElementById("header-bg"),o=Math.floor(Math.random()*i.images.preview.length);n.style["background-image"]="url("+i.images.preview[o]+")",n.style["background-size"]="cover"}},created:function(){window.onbeforeunload=this.unsaved,this.updateSection()},beforeDestroy:function(){window.document.getElementById("header-bg").style["background-image"]="url(/static/img/backgrounds/1.jpg)"},methods:{updateSection:function(){this.section||(this.section=this.$route.meta.section)},deactivateElement:function(t){this.activeElement[t]=!1},activateElement:function(t){var e=this;for(var i in this.activeElement)this.activeElement[i]=!1;this.activeElement[t]=!0,setTimeout(function(){e.$refs[t]&&e.$refs[t].focus()},10)},save:function(){var t=this;if("new"===this.id)this.product.type="game",o.sendCommand("createMarketplaceProductRequest",{profile:this.$store.state.application.account.current_identity,product:this.product}).then(function(e){var i=s.marketplace.products.insert(e);s.save(),n.a.set(t.$store.state.marketplace.products,i.id,i),t.savedState=!0});else{var e=this.product;n.a.set(this.$store.state.marketplace.products,e.id,e),s.marketplace.products.update(e),s.save(),this.savedState=!0}},unsaved:function(){if(!1===this.savedState&&"editing"===this.$store.state.application.editor_mode)return!0},closeModal:function(){this.$store.state.marketplace.first_product=!1},showImporter:function(){this.importing=!0},startImport:function(){var t=this;o.sendCommand("fetchPageDataRequest",{url:this.$refs.importUrl.value,script:"function onWindowLoad(requestId) {\n                const script = document.createElement('script');\n                script.src = 'https://code.jquery.com/jquery-2.2.4.min.js';\n                script.type = 'text/javascript';\n\n                script.onload = script.onreadystatechange = function () {\n                    const monitor = function() {\n                        try {\n                            if (!$('.game_area_description').length) return setTimeout(monitor, 500);\n\n                            const fetchers = {\n                                steam: () => {\n                                    return {\n                                        title: $('.apphub_AppName').text().trim(),\n                                        description: $('.game_description_snippet').text().trim(),\n                                        about: $('#game_area_description').html().trim(),\n                                        developers: Object.values($('#developers_list a').map((i, el) => $(el).text().trim()).get()),\n                                        publishers: Object.values($('#developers_list').parent().next().find('a').map((i, el) => $(el).text().trim()).get()),\n                                        tags: Object.values($('.popular_tags a').map((i, el) => $(el).text().trim()).get()),\n                                        releaseDate: $('.release_date .date').text().trim(),\n                                        images: {\n                                            preview: Object.values($('.highlight_strip_item.highlight_strip_screenshot').map((i, el) => $(el).find('img').attr('src')).get())\n                                        },\n                                        videos: Object.values($('.highlight_strip_item.highlight_strip_movie').map((i, el) => ({\n                                            preview: $(el).find('img').attr('src'),\n                                            url: 'https://cdn.hyperbridge.org/blockhub/videos/products/doom-20087/trailer.mp4'\n                                        })).get())\n                                    }\n                                },\n                                gog: () => {\n\n                                },\n                                itch: () => {\n\n                                }\n                            };\n\n                            let fetcherType = null;\n\n                            if (window.location.hostname.indexOf('steampowered.com'))\n                                fetcherType = 'steam';\n                            else if (window.location.hostname.indexOf('gog.com'))\n                                fetcherType = 'gog';\n                            else if (window.location.hostname.indexOf('itch.io'))\n                                fetcherType = 'itch';\n                            else {\n                                // fail\n                            }\n\n                            const fetcher = fetchers[fetcherType];\n\n                            const cmd = {\n                                key: 'resolveCallback',\n                                responseId: requestId,\n                                data: fetcher()\n                            };\n\n                            window.desktopBridge.send('command', JSON.stringify(cmd));\n                        }\n                        catch (e) {\n                            const cmd = {\n                                key: 'resolveCallback',\n                                responseId: requestId,\n                                data: {\n                                    error: true,\n                                    message: 'Error in script: ' + e\n                                }\n                            };\n\n                            window.desktopBridge.send('command', JSON.stringify(cmd));\n                        }\n                    }\n\n                    monitor();\n                };\n\n                document.body.appendChild(script);\n            }"}).then(function(e){if(e.error)return console.log(e.message);console.log("Import response: ",e),t.product.type="game",t.product.system_tags=["imported"],t.product.author_tags=e.tags,t.product.name=e.title,t.product.release_date=e.releaseDate,t.product.description=e.description,t.product.content=e.about,t.product.genre="",t.product.developer=e.developers&&e.developers[0],t.product.publisher=e.publishers&&e.publishers[0]})}},updated:function(){var t=this;$("#tag-editor").select2().on("select2:select",function(e){var i=e.params.data;t.product.developer_tags.includes(i.text)||t.product.developer_tags.push(i.text),n.a.set(t.product,"developer_tags",t.product.developer_tags)}).on("select2:unselect",function(e){var i=e.params.data;t.product.developer_tags=t.product.developer_tags.filter(function(t){return t!==i.text}),n.a.set(t.product,"developer_tags",t.product.developer_tags)}),$("#summernote").summernote({placeholder:"Type in your text",tabsize:2,height:300,callbacks:{onBlur:function(){n.a.set(t.product,"content",$("#summernote").summernote("code"))}}})},watch:{$route:function(){this.updateSection()},editor_mode:function(t,e){"editing"===e&&"publishing"===t&&(this.save(),this.$store.dispatch("application/setEditorMode","viewing"))}}},r=(i(719),i(718),i(0)),c=Object(r.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("c-layout",{attrs:{navigationKey:"product",showRightPanel:!1,navigationTitle:"GAME OVERVIEW",breadcrumbLinks:t.editing?[]:t.breadcrumbLinks}},[t.product?t._e():i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[t._v("\n            Product not found\n        ")])]),t._v(" "),t.product?i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-12"},[t.editing?i("div",{staticClass:"row",staticStyle:{"margin-bottom":"70px"}},[t.importing?t._e():i("c-button",{on:{click:t.showImporter}},[t._v("Import from Steam, GOG, etc.")]),t._v(" "),t.importing?i("div",{},[t._v("\n                    Choose source: \n                    "),i("br"),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[t._v("\n                            Steam\n                        ")]),t._v(" "),i("div",{staticClass:"col"},[t._v("\n                            GOG.com\n                        ")]),t._v(" "),i("div",{staticClass:"col"},[t._v("\n                            Itch\n                        ")])]),t._v(" "),i("br"),t._v("\n                    Enter URL:\n                    "),i("br"),t._v(" "),i("input",{ref:"importUrl",attrs:{type:"text",value:"https://store.steampowered.com/app/441830/I_am_Setsuna/"}}),t._v(" "),i("br"),t._v(" "),i("c-button",{on:{click:t.startImport}},[t._v("Go")]),t._v(" "),i("br"),t._v(" "),i("div",[t._v("Importing...")]),t._v("\n                    Results:\n                    "),i("br"),t._v(" "),i("textarea",{ref:"importResults"}),t._v(" "),i("div",[t._v("Submission Cost: 10 HBX")])],1):t._e()],1):t._e(),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-8"},[i("div",{staticClass:"editor-container"},[t.editing?i("div",{staticClass:"editor"},[t.activeElement.name?t._e():i("button",{staticClass:"btn btn-secondary btn--icon btn--icon-stacked btn--icon-right",on:{click:function(e){t.activateElement("name")}}},[t._v("Change\n                                Product Name "),i("span",{staticClass:"fa fa-edit"})]),t._v(" "),t.activeElement.name?i("div",{staticClass:"form-group"},[i("div",{staticClass:"form-control-element form-control-element--right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],ref:"name",staticClass:"form-control",attrs:{name:"name",type:"text",placeholder:"Product name..."},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}}),t._v(" "),i("div",{staticClass:"form-control-element__box form-control-element__box--pretify bg-secondary",on:{click:function(e){t.deactivateElement("name")}}},[i("span",{staticClass:"fa fa-check"})])])]):t._e()]):t._e(),t._v(" "),i("h1",{staticClass:"title margin-top-10 margin-bottom-15"},[t._v(t._s(t.product.name))])]),t._v(" "),i("div",{staticClass:"editor-container"},[t.editing?i("div",{},[i("div",{staticClass:"form-group"},[i("select",{staticClass:"form-control",attrs:{id:"tag-editor",multiple:"multiple"}},t._l(t.author_tag_options,function(e,n){return i("option",{key:n,domProps:{selected:t.product.developer_tags.includes(e)}},[t._v(t._s(e)+"\n                                    ")])}))])]):t._e(),t._v(" "),t.editing?t._e():i("c-tags-list",{attrs:{tags:t.product.developer_tags}})],1)]),t._v(" "),i("div",{staticClass:"col-12 col-md-4"},[t.editing?i("div",{staticClass:"editor"},[t.activeElement.background_image?t._e():i("button",{staticClass:"btn btn-secondary btn--icon btn--icon-stacked btn--icon-right",on:{click:function(e){t.activateElement("background_image")}}},[t._v("Change Background Image "),i("span",{staticClass:"fa fa-edit"})]),t._v(" "),t.activeElement.background_image?i("div",{staticClass:"form-group"},[i("div",{staticClass:"form-control-element form-control-element--right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.product.images.header,expression:"product.images.header"}],ref:"background_image",staticClass:"form-control",attrs:{name:"background_image",type:"text",placeholder:"Background image URL..."},domProps:{value:t.product.images.header},on:{input:function(e){e.target.composing||t.$set(t.product.images,"header",e.target.value)}}}),t._v(" "),i("div",{staticClass:"form-control-element__box form-control-element__box--pretify bg-secondary",on:{click:function(e){t.deactivateElement("background_image")}}},[i("span",{staticClass:"fa fa-check"})])])]):t._e(),t._v(" "),i("br"),t._v(" "),i("label",[t._v("RECOMMENDED SIZE: 1120 x 524px")])]):t._e()]),t._v(" "),i("div",{staticClass:"col-12"},[i("ul",{staticClass:"nav nav-tabs margin-bottom-30 justify-content-between"},[i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",class:{active:"overview"===t.section},attrs:{to:"/product/"+t.id}},[t._v("Overview")])],1),t._v(" "),i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",class:{active:"community"===t.section},attrs:{to:"/product/"+t.id+"/community"}},[t._v("Community\n                            ")])],1),t._v(" "),i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",class:{active:"projects"===t.section},attrs:{to:"/product/"+t.id+"/projects"}},[t._v("Crowdfunding\n                            ")])],1),t._v(" "),i("li",{staticClass:"nav-item"},[i("router-link",{staticClass:"nav-link",class:{active:"assets"===t.section},attrs:{to:"/product/"+t.id+"/assets"}},[t._v("Inventory")])],1)])]),t._v(" "),i("div",{staticClass:"col-12"},["overview"===t.section?i("c-product-overview",{attrs:{product:t.product,editing:t.editing}}):t._e(),t._v(" "),"assets"===t.section?i("c-product-assets",{attrs:{product:t.product,editing:t.editing}}):t._e(),t._v(" "),"community"===t.section?i("c-product-community",{attrs:{product:t.product,editing:t.editing}}):t._e(),t._v(" "),"projects"===t.section?i("c-product-projects",{attrs:{product:t.product,editing:t.editing}}):t._e()],1)])])]):t._e(),t._v(" "),t.first_product&&t.editing?i("c-custom-modal",{attrs:{title:"Help Center"},on:{close:t.closeModal}},[i("div",{staticClass:"help-modal__content",staticStyle:{"max-width":"500px"},attrs:{slot:"modal_body"},slot:"modal_body"},[i("h4",{staticClass:"h2 mb-3"},[t._v("Creating your first product?")]),t._v(" "),i("p",[t._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                Etiam elementum ac ligula nec viverra. Nunc molestie augue a erat ultrices fermentum.")]),t._v(" "),i("p",[t._v("Curabitur non bibendum erat. Praesent nec vestibulum odio, vel euismod enim. Sed at tincidunt risus.\n                Mauris ac facilisis metus. Proin venenatis neque posuere urna sagittis ultricies.")]),t._v(" "),i("p",[i("a",{attrs:{href:"/#/help",target:"_blank"}},[t._v("Learn more about creating products")])])]),t._v(" "),i("div",{staticClass:"text-right w-100",attrs:{slot:"modal_footer"},slot:"modal_footer"},[i("c-button",{attrs:{size:"md"},on:{click:t.closeModal}},[t._v("Got it")])],1)]):t._e()],1)},[],!1,null,"560753ea",null);e.default=c.exports},205:function(t,e){},206:function(t,e){},718:function(t,e,i){"use strict";var n=i(205);i.n(n).a},719:function(t,e,i){"use strict";var n=i(206);i.n(n).a}}]);